{"version":3,"sources":["const.js","utils.js","Flow.js","Home.js","Markdown.js","Comments.js","Post.js","SearchBar.js","SearchResults.js","App.js","index.js"],"names":["API_ROOT","convertTime","timestamp","date","Date","Y","getFullYear","M","getMonth","D","getDate","h","getHours","m","getMinutes","FlowItem","props","className","to","value","slice","Flow","meta","map","index","key","Home","useState","setMeta","loading","setLoading","useEffect","fetch","then","res","json","CodeBlock","this","language","style","dark","PureComponent","defaultProps","MarkdownRender","newProps","plugins","RemarkMathPlugin","renderers","code","math","Node","formula","inlineMath","inline","Provider","input","CommentItem","CommentForm","name","setName","comment","setComment","onSubmit","event","preventDefault","formData","FormData","append","title","method","body","catch","e","console","error","alert","refresh","placeholder","onChange","target","type","Comments","useParams","load_comments","useCallback","Post","content","setContent","Markdown","source","SearchBar","history","useHistory","keyword","setKeyword","push","SearchResults","results","setResults","NoMatch","App","exact","path","showUnder","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cea67250.chunk.js","sourcesContent":["export const API_ROOT = \"http://47.98.40.119:5000\";","function convertTime(timestamp) {\r\n  var date = new Date(timestamp * 1000);\r\n  var Y = date.getFullYear();\r\n  var M = date.getMonth()+1;\r\n  var D = date.getDate();\r\n  var h = date.getHours();\r\n  var m = date.getMinutes();\r\n  return Y+'-'+M+'-'+D+' '+(h<=9? '0'+h : h)+':'+(m<=9? '0'+m : m);\r\n}\r\n\r\nexport {convertTime};","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport './Flow.css';\r\nimport {convertTime} from './utils'\r\n\r\n\r\nfunction Flow(props) {\r\n  return (\r\n    <div className=\"flow\"> \r\n      {props.meta.map((value, index) => (\r\n        <FlowItem value={value} key={index} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n  \r\nfunction FlowItem(props) {\r\n  // hold single post\r\n  return (\r\n    <div className=\"flow-item\">\r\n      <Link to={\"/blogs/archive/\"+props.value[0]} className=\"title\"> \r\n        {props.value[0].slice(0, -3)} \r\n      </Link>\r\n      <span className=\"date\"> \r\n        {convertTime(props.value[1])+\" (created at \"+convertTime(props.value[2])+\")\"} \r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default Flow;","import React, {useState, useEffect} from 'react';\r\n\r\nimport {API_ROOT} from \"./const\";\r\nimport Flow from \"./Flow\"\r\n\r\nfunction Home(){\r\n  const [meta, setMeta] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // fetch all blogs' information\r\n  useEffect(()=>{\r\n    // Mount & Update\r\n    fetch(API_ROOT+\"/get_blogs_meta\").then(\r\n      res => res.json()\r\n    ).then(\r\n      res => {\r\n        setMeta(res);\r\n        setLoading(false);\r\n      }\r\n    );\r\n  }, []); // never update\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading\">\r\n        <span className=\"icon icon-hour-glass\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"Home\">\r\n      <Flow meta={meta} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;","import React, {PureComponent} from 'react';\r\nimport ReactMarkdown from \"react-markdown\"\r\nimport MathJax from 'react-mathjax';\r\nimport RemarkMathPlugin from 'remark-math';\r\nimport PropTypes from \"prop-types\";\r\nimport {Prism as SyntaxHighlighter} from \"react-syntax-highlighter\";\r\nimport {dark} from \"react-syntax-highlighter/dist/esm/styles/prism\";\r\n\r\n\r\n\r\nclass CodeBlock extends PureComponent {\r\n  static propTypes = {\r\n    value: PropTypes.string.isRequired,\r\n    language: PropTypes.string\r\n  };\r\n\r\n  static defaultProps = {\r\n    language: null\r\n  };\r\n\r\n  render() {\r\n    const { language, value } = this.props;\r\n    return (\r\n      <SyntaxHighlighter language={language} style={dark}>\r\n        {value}\r\n      </SyntaxHighlighter>\r\n    );\r\n  }\r\n}\r\n\r\nfunction MarkdownRender(props) {\r\n  const newProps = {\r\n      ...props,\r\n      plugins: [\r\n        RemarkMathPlugin,\r\n      ],\r\n      renderers: {\r\n        ...props.renderers,\r\n        code: CodeBlock,\r\n        math: (props) => \r\n          <MathJax.Node formula={props.value} />,\r\n        inlineMath: (props) =>\r\n          <MathJax.Node inline formula={props.value} />\r\n      }\r\n    };\r\n    return (\r\n      <MathJax.Provider input=\"tex\">\r\n          <ReactMarkdown {...newProps} />\r\n      </MathJax.Provider>\r\n    );\r\n}\r\n\r\nexport default MarkdownRender;","import React, {useState, useEffect, useCallback} from 'react';\r\nimport {useParams} from \"react-router-dom\";\r\n\r\nimport {API_ROOT} from \"./const\";\r\nimport \"./Comments.css\"\r\nimport {convertTime} from './utils'\r\n\r\n  \r\nfunction CommentItem(props) {\r\n  // hold single post\r\n  return (\r\n    <div className=\"comment-item\">\r\n      <span className=\"user\">\r\n        {props.value[1]}\r\n      </span>\r\n      <span className=\"date\"> \r\n        {convertTime(props.value[0])} \r\n      </span>\r\n      <br/>\r\n      <span className=\"content\">\r\n        {props.value[2]}\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nfunction CommentForm(props) {\r\n  const [name, setName] = useState('');\r\n  const [comment, setComment] = useState('');\r\n\r\n  function handleNameChange(event) {\r\n    setName(event.target.value); // here event.target is <input>\r\n  }\r\n\r\n  function handleCommentChange(event) {\r\n    setComment(event.target.value); // here event.target is <input>\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    if (name ==='') {\r\n      alert(\"Name must not be null.\");\r\n      return;\r\n    }\r\n    if (comment === '') {\r\n      alert(\"Comment must not be null.\");\r\n      return;\r\n    }\r\n    let formData = new FormData();\r\n    formData.append('title', props.title);\r\n    formData.append('name', name);\r\n    formData.append('body', comment);\r\n\r\n    fetch(API_ROOT+\"/post_comment\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n    }).then(\r\n      res => res.json()\r\n    ).catch(\r\n      (e) => {\r\n        console.error(e);\r\n        alert(\"Error, comment failed.\")\r\n      }\r\n    ).then(\r\n      res => {\r\n        setName('');\r\n        setComment('');\r\n        props.refresh();\r\n      }\r\n    )\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"comment-form\">\r\n      <div className=\"inputarea\">\r\n        <textarea value={comment} placeholder=\"Comment\" onChange={handleCommentChange} />\r\n        <input type=\"text\" value={name} placeholder=\"Name\" onChange={handleNameChange} />\r\n      </div>\r\n      <button type=\"submit\">\r\n        <span className=\"icon icon-compass\" />\r\n      </button>\r\n    </form>\r\n  )\r\n}\r\n\r\nfunction Comments(){\r\n  const [meta, setMeta] = useState([]);\r\n  let {name} = useParams();\r\n\r\n  const load_comments = useCallback(()=>{\r\n    fetch(API_ROOT+\"/get_blogs_comments?name=\"+name).then(\r\n      res => res.json()\r\n    ).then(\r\n      res => {\r\n        setMeta(res);\r\n      }\r\n    );\r\n  }, [name])\r\n\r\n  useEffect(()=>load_comments(), [load_comments]);\r\n\r\n  return (\r\n      <div className=\"comments\">\r\n        {/* Comments */}\r\n        {meta.map((value, index) => (\r\n          <CommentItem value={value} key={index} />\r\n        ))}\r\n        {/* Insert Form */}\r\n        <hr className=\"fancy-line\" />\r\n        <CommentForm title={name} refresh={load_comments}/>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Comments;","import React, {useState, useEffect} from 'react';\r\nimport {useParams} from \"react-router-dom\";\r\n\r\nimport {API_ROOT} from \"./const\";\r\nimport MarkdownRender from \"./Markdown\"\r\nimport Comments from \"./Comments\"\r\nimport \"./Post.css\"\r\n\r\n\r\nfunction Post(){\r\n  // load post by {id}\r\n  let {name} = useParams();\r\n  const [content, setContent] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(()=>{\r\n    fetch(API_ROOT+\"/get_blogs_content?name=\"+name).then(\r\n      res => res.json()\r\n    ).then(\r\n      res => {\r\n        setContent(res[0]);\r\n        setLoading(false);\r\n      }\r\n    );\r\n  }, [name]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading\">\r\n        <span className=\"icon icon-hour-glass\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n      <div className=\"post\">\r\n        <MarkdownRender source={content} />\r\n        <hr className=\"fancy-line\" />\r\n        <Comments />\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Post;","import React, {useState} from 'react';\r\nimport {useHistory} from \"react-router-dom\";\r\nimport './App.css';\r\n\r\n\r\nfunction SearchBar() {\r\n  // history must be inside router. This component has to be extracted out to work!\r\n  const history = useHistory();\r\n  const [keyword, setKeyword] = useState('');\r\n\r\n  function handleChange(event) {\r\n    setKeyword(event.target.value); // here event.target is <input>\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    history.push(\"/blogs/search/\"+keyword);\r\n    setKeyword('') // clear input\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <input type=\"text\" value={keyword} placeholder=\"Search\" onChange={handleChange}/>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default SearchBar;","import React, {useState, useEffect} from 'react';\r\nimport {useParams} from \"react-router-dom\";\r\n\r\nimport {API_ROOT} from \"./const\";\r\nimport Flow from \"./Flow\"\r\n\r\n\r\nfunction SearchResults(){\r\n  let {keyword} = useParams();\r\n  const [results, setResults] = useState([]);\r\n\r\n  useEffect(()=>{\r\n    fetch(API_ROOT+\"/search_blogs_content?keyword=\"+keyword).then(\r\n        res => res.json()\r\n      ).then(\r\n        res => {\r\n          setResults(res);\r\n        }\r\n      )\r\n  }, [keyword]);\r\n\r\n  return (\r\n      <div className=\"search-results\">\r\n        <Flow meta={results} />\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default SearchResults;","import React from 'react';\nimport {BrowserRouter as Router, Switch, Route, Link} from \"react-router-dom\";\nimport ScrollToTop from 'react-scroll-up';\nimport './App.css';\n\nimport Home from \"./Home\"\nimport Post from \"./Post\";\nimport SearchBar from \"./SearchBar\"\nimport SearchResults from \"./SearchResults\"\n\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router>\n        <div className=\"header\"> \n          <Link to=\"/blogs\"> Hawthorn & key </Link>\n          <div className='search-bar'>\n            <SearchBar />\n          </div>\n        </div>\n        <div className=\"content\">\n          <hr className=\"fancy-line\" />\n          <Switch>\n            {/* Home page */}\n            <Route exact path=\"/blogs\">\n              <Home />\n            </Route>\n            {/* Search page */}\n            <Route path=\"/blogs/search/:keyword\">\n              <SearchResults />\n            </Route>\n            {/* Post page */}\n            <Route path=\"/blogs/archive/:name\">\n              <Post />\n            </Route>\n            {/* fallback */}\n            <Route path=\"*\">\n              <NoMatch />\n            </Route>\n          </Switch>\n          <hr className=\"fancy-line\" />\n        </div>\n        <ScrollToTop showUnder={160}>\n          <span className=\"icon icon-circle-up\" />\n        </ScrollToTop>\n        <div className=\"footer\"> \n          @ hawkey\n        </div>\n      </Router>\n    </div>\n  );\n}\n\nfunction NoMatch() {\n  return (\n    <div className=\"no-match\">\n      <p> No match! </p>\n    </div>\n  );\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}