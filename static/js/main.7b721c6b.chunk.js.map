{"version":3,"sources":["const.js","Flow.js","Markdown.js","Post.js","SearchResults.js","App.js","index.js"],"names":["API_ROOT","FlowItem","props","className","to","value","slice","Flow","meta","map","index","key","CodeBlock","this","language","style","dark","PureComponent","defaultProps","MarkdownRender","newProps","plugins","RemarkMathPlugin","renderers","code","math","Node","formula","inlineMath","inline","Provider","input","Post","name","useParams","useState","content","setContent","useEffect","fetch","then","res","json","Markdown","source","SearchResults","keyword","results","setResults","SearchBar","history","useHistory","setKeyword","onSubmit","event","preventDefault","push","type","placeholder","onChange","target","NoMatch","App","setMeta","exact","path","showUnder","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7b721c6b.chunk.js","sourcesContent":["export const API_ROOT = \"//localhost:5000\";","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport './Flow.css';\r\n\r\nfunction Flow(props) {\r\n  return (\r\n    <div className=\"flow\"> \r\n      {props.meta.map((value, index) => (\r\n        <FlowItem value={value} key={index} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n  \r\nfunction FlowItem(props) {\r\n  // hold single post\r\n  return (\r\n    <div className=\"flow-item\">\r\n      <Link to={\"/blogs/archive/\"+props.value['title']} className=\"title\"> \r\n        {props.value['title'].slice(0, -3)} \r\n      </Link>\r\n      <span className=\"date\"> \r\n        {props.value['mtime']+\" (created at \"+props.value['ctime']+\")\"} \r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default Flow;","import React, {PureComponent} from 'react';\r\nimport ReactMarkdown from \"react-markdown\"\r\nimport MathJax from 'react-mathjax';\r\nimport RemarkMathPlugin from 'remark-math';\r\nimport PropTypes from \"prop-types\";\r\nimport {Prism as SyntaxHighlighter} from \"react-syntax-highlighter\";\r\nimport {dark} from \"react-syntax-highlighter/dist/esm/styles/prism\";\r\n\r\n\r\n\r\nclass CodeBlock extends PureComponent {\r\n  static propTypes = {\r\n    value: PropTypes.string.isRequired,\r\n    language: PropTypes.string\r\n  };\r\n\r\n  static defaultProps = {\r\n    language: null\r\n  };\r\n\r\n  render() {\r\n    const { language, value } = this.props;\r\n    return (\r\n      <SyntaxHighlighter language={language} style={dark}>\r\n        {value}\r\n      </SyntaxHighlighter>\r\n    );\r\n  }\r\n}\r\n\r\nfunction MarkdownRender(props) {\r\n  const newProps = {\r\n      ...props,\r\n      plugins: [\r\n        RemarkMathPlugin,\r\n      ],\r\n      renderers: {\r\n        ...props.renderers,\r\n        code: CodeBlock,\r\n        math: (props) => \r\n          <MathJax.Node formula={props.value} />,\r\n        inlineMath: (props) =>\r\n          <MathJax.Node inline formula={props.value} />\r\n      }\r\n    };\r\n    return (\r\n      <MathJax.Provider input=\"tex\">\r\n          <ReactMarkdown {...newProps} />\r\n      </MathJax.Provider>\r\n    );\r\n}\r\n\r\nexport default MarkdownRender;","import React, {useState, useEffect} from 'react';\r\nimport {useParams} from \"react-router-dom\";\r\n\r\nimport {API_ROOT} from \"./const\";\r\nimport MarkdownRender from \"./Markdown\"\r\nimport \"./Post.css\"\r\n\r\n\r\nfunction Post(){\r\n  // load post by {id}\r\n  let {name} = useParams();\r\n  const [content, setContent] = useState(\"\");\r\n\r\n  useEffect(()=>{\r\n    fetch(API_ROOT+\"/get_blogs_content?name=\"+name).then(\r\n      res => res.json()\r\n    ).then(\r\n      res => {\r\n        setContent(res['body']);\r\n      }\r\n    );\r\n  });\r\n\r\n  return (\r\n      <div className=\"post\">\r\n        <MarkdownRender source={content} />\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Post;","import React, {useState, useEffect} from 'react';\r\nimport {useParams} from \"react-router-dom\";\r\n\r\nimport {API_ROOT} from \"./const\";\r\nimport Flow from \"./Flow\"\r\n\r\n\r\nfunction SearchResults(){\r\n  let {keyword} = useParams();\r\n  const [results, setResults] = useState([]);\r\n\r\n  useEffect(()=>{\r\n    fetch(API_ROOT+\"/search_blogs_content?keyword=\"+keyword).then(\r\n        res => res.json()\r\n      ).then(\r\n        res => {\r\n          setResults(res);\r\n        }\r\n      )\r\n  }, [keyword]);\r\n\r\n  return (\r\n      <div className=\"search-results\">\r\n        <Flow meta={results} />\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default SearchResults;","import React, {useState, useEffect} from 'react';\nimport {BrowserRouter as Router, Switch, Route, Link, useHistory} from \"react-router-dom\";\nimport ScrollToTop from 'react-scroll-up';\nimport './App.css';\nimport {API_ROOT} from \"./const\";\n\nimport Flow from \"./Flow\";\nimport Post from \"./Post\";\nimport SearchResults from \"./SearchResults\"\n\n\nfunction SearchBar() {\n  // history must be inside router. This component has to be extracted out to work!\n  const history = useHistory();\n  const [keyword, setKeyword] = useState('');\n\n  function handleChange(event) {\n    setKeyword(event.target.value); // here event.target is <input>\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    history.push(\"/blogs/search/\"+keyword);\n    setKeyword('') // clear input\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input type=\"text\" value={keyword} placeholder=\"Search\" onChange={handleChange}/>\n    </form>\n  )\n}\n\nfunction App() {\n  \n  const [meta, setMeta] = useState([]);\n\n  // fetch all blogs' information\n  useEffect(()=>{\n    // Mount & Update\n    fetch(API_ROOT+\"/get_blogs_meta\").then(\n      res => res.json()\n    ).then(\n      res => {\n        setMeta(res);\n      }\n    );\n  }, []); // never update\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <div className=\"header\"> \n          <Link to=\"/blogs\"> Hawthorn & key </Link>\n          <div className='search-bar'>\n            <SearchBar />\n          </div>\n        </div>\n        <div className=\"content\">\n          <hr className=\"fancy-line\" />\n          <Switch>\n            {/* Home page */}\n            <Route exact path=\"/blogs\">\n              <Flow meta={meta}/>\n            </Route>\n            {/* Search page */}\n            <Route path=\"/blogs/search/:keyword\">\n              <SearchResults />\n            </Route>\n            {/* Post page */}\n            <Route path=\"/blogs/archive/:name\">\n              <Post />\n            </Route>\n            {/* fallback */}\n            <Route path=\"*\">\n              <NoMatch />\n            </Route>\n          </Switch>\n          <hr className=\"fancy-line\" />\n        </div>\n        <ScrollToTop showUnder={160}>\n          <span className=\"icon icon-arrow-up2\" />\n        </ScrollToTop>\n        <div className=\"footer\"> \n          @ hawkey\n        </div>\n      </Router>\n    </div>\n  );\n}\n\nfunction NoMatch() {\n  return (\n    <div className=\"no-match\">\n      <p> No match! </p>\n    </div>\n  );\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}